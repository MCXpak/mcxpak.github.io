<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <script src="script.js"></script>
  <script type="text/javascript" src="instascan.min.js"></script>
</head>
<body>
<ons-splitter>
  <ons-splitter-side id="menu" side="left" width="200px" collapse swipeable >
    <ons-page>
      <ons-list>
        <ons-list-item modifier="nodivider" onclick="fn.load('scan.html')" tappable>
          SCAN QR
        </ons-list-item>
        <ons-list-item modifier="nodivider" onclick="fn.load('badges.html')" tappable>
          BADGES
        </ons-list-item>
        <ons-list-item modifier="nodivider" onclick="fn.load('map.html')" tappable>
          MAP
        </ons-list-item>
      </ons-list>
    </ons-page>
  </ons-splitter-side>
  <ons-splitter-content id="content" page="scan.html"></ons-splitter-content>
</ons-splitter>

<template id="scan.html">
  <ons-page>
    <ons-toolbar modifier="transparent">
      <div class="left">
        <ons-toolbar-button onclick="fn.open()">
          <ons-icon icon="md-menu" style="color: #FFFFFF"></ons-icon>
        </ons-toolbar-button>
      </div>
      <div class="center">
      </div>
    </ons-toolbar>
    <p style="text-align: center; opacity: 0.6; padding-top: 20px;">
    </p>
    <video id="preview"></video>
    <script type="text/javascript">
      let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
      scanner.addListener('scan', function (content) {
        console.log(content);
      });
      Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
          scanner.start(cameras[0]);
        } else {
          console.error('No cameras found.');
        }
      }).catch(function (e) {
        console.error(e);
      });
    </script>
  </ons-page>
</template>

<template id="badges.html">
  <ons-page>
    <ons-toolbar modifier="transparent">
      <div class="left">
        <ons-toolbar-button onclick="fn.open()">
          <ons-icon icon="md-menu" style="color: #FFFFFF"></ons-icon>
        </ons-toolbar-button>
      </div>
      <div class="center">
        BADGES
      </div>
    </ons-toolbar>
  </ons-page>
</template>

<template id="map.html">
  <ons-page>
    <ons-toolbar modifier="transparent">
      <div class="left">
        <ons-toolbar-button onclick="fn.open()">
          <ons-icon icon="md-menu" style="color: #FFFFFF"></ons-icon>
        </ons-toolbar-button>
      </div>
      <div class="center">
        MAP
      </div>
    </ons-toolbar>
  </ons-page>
</template>
</body>
</html>
